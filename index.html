<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Zostaniesz mojÄ… WalentynkÄ…?</title>
  <style>
    :root{
      --bg1:#fff0f6;
      --bg2:#ffd6e7;
      --card:#ffffffcc;
      --txt:#2b2b2b;
      --accent:#ff3d6e;
      --accent2:#7c3aed;
      --shadow: 0 20px 60px rgba(0,0,0,.12);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      display:grid;
      place-items:center;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--txt);
      background:
        radial-gradient(1200px 700px at 20% 10%, #ffffff 0%, transparent 55%),
        radial-gradient(900px 600px at 80% 20%, #ffe0f0 0%, transparent 60%),
        linear-gradient(160deg, var(--bg1), var(--bg2));
      overflow:hidden;
    }

    .float{
      position:absolute; inset:-20%;
      pointer-events:none;
      filter: blur(0.2px);
      opacity:.45;
      animation: drift 18s linear infinite;
      background:
        radial-gradient(circle at 10% 20%, rgba(255,61,110,.25) 0 8px, transparent 9px),
        radial-gradient(circle at 30% 40%, rgba(124,58,237,.18) 0 10px, transparent 11px),
        radial-gradient(circle at 60% 30%, rgba(255,61,110,.18) 0 12px, transparent 13px),
        radial-gradient(circle at 80% 70%, rgba(124,58,237,.14) 0 9px, transparent 10px),
        radial-gradient(circle at 50% 80%, rgba(255,61,110,.12) 0 14px, transparent 15px);
      background-size: 420px 420px;
    }
    @keyframes drift{
      from{transform:translate3d(-2%, -2%, 0) rotate(0deg)}
      to{transform:translate3d(2%, 2%, 0) rotate(8deg)}
    }

    .wrap{
      width:min(920px, 92vw);
      padding: 22px;
      display:grid;
      grid-template-columns: 1.1fr 0.9fr;
      gap: 18px;
      align-items:stretch;
    }
    @media (max-width: 860px){
      .wrap{grid-template-columns:1fr; }
    }

    .card{
      background: var(--card);
      border: 1px solid rgba(255,255,255,.55);
      border-radius: 22px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      padding: 26px;
      position:relative;
      overflow:hidden;
    }

    .title{
      font-size: clamp(28px, 4vw, 44px);
      margin: 0 0 8px;
      letter-spacing:-.02em;
      line-height:1.05;
    }
    .subtitle{
      margin: 0 0 16px;
      opacity:.85;
      font-size: 15px;
    }

    .btnrow{
      position: relative;
      margin-top: 22px;
      min-height: 170px;
      display: block;
      overflow: hidden;
    }

    .btn{
      border:0;
      border-radius: 16px;
      padding: 14px 18px;
      font-size: 18px;
      font-weight: 750;
      letter-spacing:.01em;
      cursor:pointer;
      transition: transform .18s ease, box-shadow .18s ease, filter .18s ease, opacity .35s ease;
      user-select:none;
      position:relative;
      line-height: 1;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      white-space: nowrap;
    }
    .btn:active{transform: translateY(1px) scale(.99)}

    .btn-yes{
      background: linear-gradient(135deg, var(--accent), #ff7aa5);
      color:white;
      box-shadow: 0 14px 34px rgba(255,61,110,.28);
      transform-origin: left bottom;
    }
    .btn-yes:hover{filter:brightness(1.03); transform: translateY(-1px) scale(1.01)}

    .btn-no{
      background: rgba(30,30,35,.08);
      color:#222;
      border:1px solid rgba(0,0,0,.08);
      box-shadow: 0 14px 34px rgba(0,0,0,.08);
      position:absolute;
      padding: 14px 18px;
      opacity: 1;
    }
    .btn-no:hover{transform: translateY(-1px)}

    #yes{
      position: absolute;
      left: 16px;
      bottom: 16px;
      z-index: 2;
      transform-origin: left bottom;
    }
    #no{
      z-index: 3;
      transform-origin: center;
    }

    .panel{
      display:flex;
      flex-direction:column;
      gap: 14px;
    }

    .stats{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    .stat{
      background: rgba(255,255,255,.55);
      border:1px solid rgba(255,255,255,.7);
      border-radius: 18px;
      padding: 12px 14px;
    }
    .stat b{display:block; font-size: 18px;}
    .stat span{opacity:.75; font-size: 12px;}

    .tip{
      margin:0;
      font-size: 14px;
      opacity:.85;
      line-height:1.35;
    }

    .toast{
      position: relative;
      margin-top: auto;
      background: rgba(255,255,255,.9);
      border:1px solid rgba(0,0,0,.06);
      border-radius: 14px;
      padding: 10px 14px;
      font-size: 14px;
      font-weight: 500;
      opacity: 0;
      transform: translateY(10px);
      transition: .3s ease;
      pointer-events:none;
      box-shadow: 0 10px 25px rgba(0,0,0,.08);
    }
    .toast.show{
      opacity:1;
      transform: translateY(0);
    }

    canvas{position:fixed; inset:0; pointer-events:none;}
    #confetti{z-index:6;}
    #hearts{z-index:2;}

    .final{
      position:fixed; inset:0;
      display:none;
      place-items:center;
      z-index:10;
      background: radial-gradient(900px 600px at 50% 30%, rgba(255,255,255,.9), rgba(255,255,255,.45));
      backdrop-filter: blur(8px);
      padding: 22px;
      text-align:center;

      opacity: 0;
      transition: opacity .45s ease;
    }
    .final.show { opacity: 1; }

    .final .box{
      width:min(760px, 92vw);
      border-radius: 24px;
      background: rgba(255,255,255,.75);
      border:1px solid rgba(255,255,255,.85);
      padding: 28px;

      transform: translateY(16px) scale(.96);
      opacity: 0;
      transition: transform .55s cubic-bezier(.2,1,.2,1), opacity .55s ease;
      box-shadow: 0 30px 90px rgba(255,61,110,.22);
    }
    .final.show .box{
      transform: translateY(0) scale(1);
      opacity: 1;
    }

    .final h2{
      margin:0 0 10px;
      font-size: clamp(28px, 4vw, 46px);
    }
    .final p{
      margin:0 0 18px;
      opacity:.85;
      font-size: 15px;
      line-height:1.4;
    }
    .final .small{
      font-size: 12px;
      opacity:.7;
      margin-top: 10px;
    }

    .mutebtn{
      border:0;
      background: rgba(255,255,255,.55);
      border:1px solid rgba(255,255,255,.8);
      border-radius: 14px;
      padding: 10px 12px;
      cursor:pointer;
      font-weight:650;
      font-size: 13px;
      opacity:.9;
    }
  </style>
</head>
<body>
  <div class="float" aria-hidden="true"></div>
  <canvas id="hearts"></canvas>
  <canvas id="confetti"></canvas>

  <div class="wrap">
    <div class="card">
      <h1 class="title">Jula, czy zostaniesz mojÄ… WalentynkÄ…? ğŸ’˜</h1>
      <p class="subtitle">MaÅ‚a wskazÃ³wka: jeden z przyciskÃ³w ucieka jak przeciwnicy na ARAM-ach ğŸ˜Œ.</p>

      <p class="tip">
        MoÅ¼esz wybraÄ‡ dowolnÄ… opcjÄ™â€¦ teoretycznie ğŸ˜ŒğŸ˜ŒğŸ˜Œ
      </p>

      <div class="btnrow" id="arena">
        <button class="btn btn-yes" id="yes">TAK â¤ï¸</button>
        <button class="btn btn-no" id="no">NIE ğŸ¥º</button>
      </div>
    </div>

    <div class="card panel" id="side">
      <div class="stats">
        <div class="stat"><b id="noCount">0</b><span>prÃ³b klikniÄ™cia â€NIEâ€</span></div>
        <div class="stat"><b id="chance">100%</b><span>szansa na â€TAKâ€</span></div>
      </div>

      <p class="tip" id="status">Tu sÄ… statystyki, nie przejmuj siÄ™ nimi â¤ï¸</p>

      <button class="mutebtn" id="mute">ğŸ”‡ DÅºwiÄ™k: OFF</button>

      <div class="toast" id="toast">ğŸ‘€</div>
    </div>
  </div>

  <div class="final" id="final">
    <div class="box">
      <h2>Oficjalnie zostaÅ‚aÅ› mojÄ… WalentynkÄ… ğŸ’</h2>
      <p>
        Gratulacje Jula, wÅ‚aÅ›nie aktywowaÅ‚aÅ› tryb: <b>â€Darek + 100 do szczÄ™Å›ciaâ€ âœ¨</b>.
        <br/>MiÅ‚oÅ›Ä‡ zaakceptowana. Reklamacji nie przyjmujÄ™ ğŸ‘€ğŸ’
      </p>
      <button class="btn btn-yes" onclick="location.reload()">Jeszcze raz ğŸ˜¼</button>
      <div class="small">Love you</div>
    </div>
  </div>

<script>
(() => {
  // ======= Audio =======
  let audioEnabled = false;
  let audioCtx = null;

  function beep(freq=660, dur=0.08, type='sine', gain=0.06){
    if(!audioEnabled) return;
    if(!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    const o = audioCtx.createOscillator();
    const g = audioCtx.createGain();
    o.type = type;
    o.frequency.value = freq;
    g.gain.value = gain;
    o.connect(g); g.connect(audioCtx.destination);
    o.start();
    o.stop(audioCtx.currentTime + dur);
  }

  function chime(){
    beep(740,0.08,'sine',0.055);
    setTimeout(()=>beep(880,0.09,'sine',0.055), 90);
    setTimeout(()=>beep(990,0.12,'sine',0.055), 190);
    setTimeout(()=>beep(1180,0.12,'triangle',0.05), 340);
    setTimeout(()=>beep(1320,0.14,'triangle',0.045), 520);
  }

  const muteBtn = document.getElementById('mute');
  muteBtn.addEventListener('click', () => {
    audioEnabled = !audioEnabled;
    muteBtn.textContent = audioEnabled ? "ğŸ”Š DÅºwiÄ™k: ON" : "ğŸ”‡ DÅºwiÄ™k: OFF";
    beep(420,0.06,'triangle',0.04);
  });

  // ======= UI =======
  const yes = document.getElementById('yes');
  const no = document.getElementById('no');
  const arena = document.getElementById('arena');
  const toast = document.getElementById('toast');
  const noCountEl = document.getElementById('noCount');
  const chanceEl = document.getElementById('chance');
  const status = document.getElementById('status');
  const final = document.getElementById('final');

  let noCount = 0;
  let yesScale = 1.0;

  const YES_MAX  = 5;
  const YES_STEP = 0.2;

  const taunts = [
    "Julaâ€¦ jesteÅ› pewna? ğŸ¥º",
    "Ten przycisk wyglÄ…da, jakby nie chciaÅ‚ byÄ‡ klikniÄ™ty ğŸ˜¿",
    "Darek wÅ‚aÅ›nie patrzy z nadziejÄ… ğŸ˜",
    "Serio prÃ³bujesz? Ten przycisk siÄ™ stresuje ğŸ˜­",
    "NIE udaje odwaÅ¼ne, ale w Å›rodku panikuje ğŸ™ˆ",
    "To chyba nie ta opcja, co? ğŸ˜¼",
    "Przycisk NIE wÅ‚aÅ›nie zaczÄ…Å‚ siÄ™ rumieniÄ‡ ğŸ˜³",
    "Darek udaje spokÃ³j, ale to trudne ğŸ˜…"
  ];

  let toastTimer = null;
  function showToast(msg){
    toast.textContent = msg;
    toast.classList.add('show');
    if (toastTimer) clearTimeout(toastTimer);
    toastTimer = setTimeout(() => toast.classList.remove('show'), 2500);
  }

  function clamp(v, a, b){ return Math.max(a, Math.min(b, v)); }

  function moveNoRandom(e){
    no.style.right = "";
    no.style.bottom = "";

    const rect = arena.getBoundingClientRect();
    const btnW = no.offsetWidth;
    const btnH = no.offsetHeight;
    const pad = 10;

    const mx = e ? (e.clientX - rect.left) : rect.width / 2;
    const my = e ? (e.clientY - rect.top)  : rect.height / 2;

    const maxX = rect.width  - btnW - pad;
    const maxY = rect.height - btnH - pad;

    const minDist = 140;

    let x, y, tries = 0;
    do {
      x = pad + Math.random() * (maxX - pad);
      y = pad + Math.random() * (maxY - pad);
      tries++;
      if (tries > 30) break;
    } while (Math.hypot(x - mx, y - my) < minDist);

    no.style.left = x + "px";
    no.style.top  = y + "px";
  }

  function placeNoStart(){
    no.style.right = "";
    no.style.bottom = "";
    const r = arena.getBoundingClientRect();
    no.style.left = (r.width - no.offsetWidth - 8) + "px";
    no.style.top  = (r.height - no.offsetHeight - 8) + "px";
  }
  window.addEventListener('resize', placeNoStart);
  placeNoStart();

  // start bez â€skokuâ€
  yes.style.transform = "scale(1)";
  no.style.transform  = "scale(1)";
  no.style.opacity    = "1";

  // ======= Hover â€œNIEâ€ =======
  let noCooldown = false;

  no.addEventListener('pointerenter', (e) => {
    if (noCooldown) return;
    noCooldown = true;
    setTimeout(() => noCooldown = false, 150);

    noCount++;
    noCountEl.textContent = noCount;

    yesScale = Math.min(YES_MAX, yesScale + YES_STEP);
    yes.style.transform = `scale(${yesScale})`;

    const chance = 100 + noCount*69;
    chanceEl.textContent = chance + "%";

    showToast(taunts[noCount % taunts.length]);
    status.textContent = `Wykryto prÃ³bÄ™ â€NIEâ€ (${noCount}). System rekomenduje â€TAKâ€.`;

    beep(220 + noCount*20, 0.06, 'square', 0.03);
    moveNoRandom(e);

    if (noCount === 6) no.textContent = "NIE...? ğŸ˜";
    if (noCount >= 8)  no.style.opacity = "0.6";
    if (noCount >= 10) no.style.opacity = "0.3";

    if (noCount >= 11) {
      no.style.opacity = "0";
      showToast("â€NIEâ€ zrobiÅ‚o ragequit.");
      status.textContent = "UPSSSS â€NIEâ€ zniknÄ™Å‚o, teraz nie masz wyboru ğŸ˜Œ";
      beep(120,0.10,'triangle',0.04);
      setTimeout(() => { no.style.display = "none"; }, 300);
    }
  });

  no.addEventListener('click', (e) => {
    e.preventDefault();
    showToast("Nice try ğŸ˜Œ");
    moveNoRandom(e);
    beep(160,0.07,'square',0.03);
  });

  // ======= Serduszka w tle (canvas) =======
  const heartsCanvas = document.getElementById('hearts');
  const hctx = heartsCanvas.getContext('2d');
  let hearts = [];

  function resizeCanvas(c){
    c.width = window.innerWidth * devicePixelRatio;
    c.height = window.innerHeight * devicePixelRatio;
    c.style.width = window.innerWidth + "px";
    c.style.height = window.innerHeight + "px";
    const ctx = c.getContext('2d');
    ctx.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);
    return ctx;
  }
  resizeCanvas(heartsCanvas);
  window.addEventListener('resize', () => resizeCanvas(heartsCanvas));

  function spawnHeart(x=null, y=null){
    const W = window.innerWidth;
    const H = window.innerHeight;
    hearts.push({
      x: x ?? Math.random()*W,
      y: y ?? (H + 20),
      vy: 0.6 + Math.random()*1.6,
      vx: (Math.random()-0.5)*0.8,
      s: 8 + Math.random()*14,
      a: 0.35 + Math.random()*0.35,
      rot: (Math.random()-0.5)*0.8
    });
    if(hearts.length > 160) hearts.shift();
  }

  function heartBurst(amount = 34){
    const W = window.innerWidth;
    const H = window.innerHeight;
    for(let i=0;i<amount;i++){
      spawnHeart(
        W/2 + (Math.random()-0.5)*260,
        H/2 + (Math.random()-0.5)*120
      );
    }
  }

  function drawHeart(ctx, x, y, size, alpha, rot){
    ctx.save();
    ctx.translate(x,y);
    ctx.rotate(rot);
    ctx.globalAlpha = alpha;
    ctx.beginPath();
    const s = size/16;
    ctx.moveTo(0, -6*s);
    ctx.bezierCurveTo( 10*s, -16*s,  24*s, -2*s,  0, 14*s);
    ctx.bezierCurveTo(-24*s, -2*s, -10*s, -16*s, 0, -6*s);
    ctx.closePath();
    const g = ctx.createLinearGradient(-size, -size, size, size);
    g.addColorStop(0, "rgba(255,61,110,1)");
    g.addColorStop(1, "rgba(124,58,237,1)");
    ctx.fillStyle = g;
    ctx.fill();
    ctx.restore();
  }

  function heartsLoop(){
    hctx.clearRect(0,0,window.innerWidth, window.innerHeight);
    if(Math.random() < 0.12) spawnHeart();
    for(let i=hearts.length-1;i>=0;i--){
      const p = hearts[i];
      p.y -= p.vy;
      p.x += p.vx;
      p.rot += 0.004;
      p.a *= 0.999;
      drawHeart(hctx, p.x, p.y, p.s, p.a, p.rot);
      if(p.y < -40 || p.a < 0.05) hearts.splice(i,1);
    }
    requestAnimationFrame(heartsLoop);
  }
  heartsLoop();

  // ======= Confetti (canvas) =======
  const confCanvas = document.getElementById('confetti');
  const cctx = confCanvas.getContext('2d');
  resizeCanvas(confCanvas);
  window.addEventListener('resize', () => resizeCanvas(confCanvas));

  let conf = [];
  function burstConfetti(amount = 320, power = 11){
    const W = window.innerWidth;
    const H = window.innerHeight;
    for(let i=0;i<amount;i++){
      conf.push({
        x: W/2 + (Math.random()-0.5)*160,
        y: H/2 + (Math.random()-0.5)*60,
        vx: (Math.random()-0.5)*power,
        vy: (Math.random()-0.9)*power,
        g: 0.10 + Math.random()*0.10,
        r: 2 + Math.random()*5,
        a: 1,
        rot: Math.random()*Math.PI
      });
    }
  }

  function confLoop(){
    cctx.clearRect(0,0,window.innerWidth, window.innerHeight);
    for(let i=conf.length-1;i>=0;i--){
      const p = conf[i];
      p.vy += p.g;
      p.x += p.vx;
      p.y += p.vy;
      p.rot += 0.12;
      p.a *= 0.992;

      cctx.save();
      cctx.translate(p.x,p.y);
      cctx.rotate(p.rot);
      cctx.globalAlpha = p.a;
      cctx.fillStyle = (i % 3 === 0)
        ? "rgba(255,61,110,1)"
        : (i % 3 === 1) ? "rgba(124,58,237,1)" : "rgba(255,182,193,1)";
      cctx.fillRect(-p.r, -p.r, p.r*2.2, p.r*1.2);
      cctx.restore();

      if(p.y > window.innerHeight + 40 || p.a < 0.05) conf.splice(i,1);
    }
    requestAnimationFrame(confLoop);
  }
  confLoop();

  // ======= Klik â€œTAKâ€ =======
  yes.addEventListener('click', async () => {
    try{
      if(!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      if(audioCtx.state === 'suspended') await audioCtx.resume();
    }catch{}

    chime();

    // WOW: confetti w falach
    burstConfetti(320, 12);
    setTimeout(() => burstConfetti(220, 10), 220);
    setTimeout(() => burstConfetti(160, 9), 520);

    // WOW: fala serc
    heartBurst(34);
    setTimeout(() => heartBurst(26), 250);
    setTimeout(() => heartBurst(20), 520);

    showToast("ğŸ’˜ Zatwierdzono!");
    status.textContent = "TAK zostaÅ‚o przyjÄ™te. Uruchamiam tryb Walentynkowy...";

    setTimeout(() => {
      final.style.display = "grid";
      requestAnimationFrame(() => final.classList.add("show"));
    }, 1500);
  });

})();
</script>
</body>
</html>
